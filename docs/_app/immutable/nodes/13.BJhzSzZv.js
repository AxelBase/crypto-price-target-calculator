import{f as k,a as m,c as Y}from"../chunks/BGExQk8C.js";import"../chunks/CbOAJ6-1.js";import{o as ee,a as te}from"../chunks/D5z7mge6.js";import{a8 as ae,$,aa as re,d as e,t as u,ab as p,a3 as r,a5 as s,a4 as o,a9 as B,a2 as se}from"../chunks/JuysZqGX.js";import{s as l}from"../chunks/CDWdEXAu.js";import{i as L}from"../chunks/Dcvc7XmR.js";import{s as ie}from"../chunks/3U1iFgUB.js";import{i as oe}from"../chunks/D5KKXIg4.js";import{b as le}from"../chunks/Bvk8Vlss.js";import{c as de,f as ce}from"../chunks/BocQ76ql.js";const ne=!0,Pe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ne},Symbol.toStringTag,{value:"Module"}));var ve=k('<div class="alert alert-danger"> </div>'),ue=k('<div class="card mb-4 shadow-sm svelte-bxfdlt"><div class="card-body"><h5 class="card-title">Key Results</h5> <ul class="list-group list-group-flush"><li class="list-group-item"> </li> <li class="list-group-item"> </li> <li class="list-group-item"> </li> <li class="list-group-item"> </li> <li class="list-group-item"><strong> </strong></li></ul></div></div> <div class="card mb-4 shadow-sm svelte-bxfdlt"><div class="card-body"><h5 class="card-title">Price Levels Visualization</h5> <canvas id="priceLevelsChart"></canvas></div></div> <div class="card shadow-sm svelte-bxfdlt"><div class="card-body"><h5 class="card-title">Required vs Risk-Adjusted Move</h5> <canvas id="moveChart"></canvas></div></div>',1),pe=k('<div class="container mt-5"><h1 class="text-center mb-4"> </h1> <!> <div class="mt-4 text-center"><a class="btn btn-primary me-2">New Calculation</a></div></div>');function $e(S,E){ae(E,!1);let n=u(""),d=u(0),v=u(0),i=u(null),j=[],g=u(""),b=null,f=null;ee(async()=>{const t=new URLSearchParams(window.location.search);if(p(n,t.get("crypto")||""),p(d,parseFloat(t.get("current"))||0),p(v,parseFloat(t.get("target"))||0),!e(n)||e(d)<=0||e(v)<=0){p(g,"Invalid parameters. Please go back and try again.");return}if(p(i,await de(e(n),e(d),e(v))),j=await ce(e(n),7),window.Chart)R();else{const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js",a.onload=R,document.head.appendChild(a)}});function R(){const t=document.getElementById("priceLevelsChart")?.getContext("2d");t&&(b=new window.Chart(t,{type:"bar",data:{labels:["Current Price","Target Price"],datasets:[{label:"Price (USD)",data:[e(d),e(v)],backgroundColor:["rgba(0, 143, 57, 0.8)","rgba(0, 143, 57, 0.6)"],borderColor:"#008F39",borderWidth:2,borderRadius:8},{type:"line",label:"7-Day Historical Trend",data:[j[0]||e(d),null],borderColor:"#28a745",borderDash:[5,5],pointBackgroundColor:"#008F39",tension:.4,fill:!1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Current vs Target Price",color:"#333",font:{size:16,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!1,ticks:{color:"#555"},grid:{color:"rgba(0,0,0,0.05)"}},x:{ticks:{color:"#555"}}}}}));const a=document.getElementById("moveChart")?.getContext("2d");a&&e(i)&&(f=new window.Chart(a,{type:"bar",data:{labels:["Required Move","Risk-Adjusted Move"],datasets:[{label:"Percentage Change (%)",data:[e(i).requiredPercentage,e(i).adjustedPercentage],backgroundColor:["rgba(0, 143, 57, 0.7)","rgba(0, 143, 57, 0.9)"],borderColor:"#008F39",borderWidth:2,borderRadius:10,hoverBackgroundColor:"#00752e"}]},options:{responsive:!0,plugins:{title:{display:!0,text:`Move Comparison (7-Day Volatility: ${e(i).volatility}%)`,color:"#333",font:{size:16,weight:"bold"}},tooltip:{callbacks:{label:c=>`${c.dataset.label}: ${c.parsed.y}%`}}},scales:{y:{beginAtZero:!0,ticks:{color:"#555"},grid:{color:"rgba(0,0,0,0.05)"}},x:{ticks:{color:"#555"}}}}}))}te(()=>{b&&b.destroy(),f&&f.destroy()}),oe();var h=pe(),y=r(h),U=r(y);s(y);var M=o(y,2);{var V=t=>{var a=ve(),c=r(a,!0);s(a),$(()=>l(c,e(g))),m(t,a)},H=t=>{var a=Y(),c=B(a);{var W=_=>{var D=ue(),F=B(D),q=r(F),I=o(r(q),2),C=r(I),Z=r(C);s(C);var x=o(C,2),K=r(x);s(x);var w=o(x,2),N=r(w);s(w);var P=o(w,2),G=r(P);s(P);var T=o(P,2),z=r(T),J=r(z);s(z),s(T),s(I),s(q),s(F),se(4),$((Q,X)=>{l(Z,`Current Price: $${Q??""}`),l(K,`Target Price: $${X??""}`),l(N,`Required Move: ${e(i).requiredPercentage??""}% ($${e(i).requiredAbsolute??""})`),l(G,`7-Day Volatility: ${e(i).volatility??""}%`),l(J,`Risk-Adjusted Move: ${e(i).adjustedPercentage??""}% ($${e(i).adjustedAbsolute??""})`)},[()=>e(d).toFixed(2),()=>e(v).toFixed(2)]),m(_,D)};L(c,_=>{e(i)&&_(W)},!0)}m(t,a)};L(M,t=>{e(g)?t(V):t(H,!1)})}var A=o(M,2),O=r(A);s(A),s(h),$(t=>{l(U,`Calculation Results for ${t??""}`),ie(O,"href",`${le??""}/`)},[()=>e(n).toUpperCase()]),m(S,h),re()}export{$e as component,Pe as universal};
